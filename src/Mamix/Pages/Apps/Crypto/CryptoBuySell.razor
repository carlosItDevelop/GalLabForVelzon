@page "/crypto-buy-sell"
@using ApexCharts
@inject Microsoft.AspNetCore.Components.NavigationManager NavigationManager // This line is used to generate URLs dynamically //


        <!-- Tom Select CSS -->
        <link rel="stylesheet" href="@($"{NavigationManager.BaseUri}assets/libs/tom-select/css/tom-select.bootstrap5.min.css")">
 


                    <!-- Page Header -->
                    <div class="my-4 page-header-breadcrumb d-flex align-items-center justify-content-between flex-wrap gap-2">
                        <div>
                            <h1 class="page-title fw-medium fs-18 mb-2">Buy & Sell</h1>
                            <div class="">
                                <nav>
                                    <ol class="breadcrumb mb-0">
                                        <li class="breadcrumb-item"><a href="javascript:void(0);">Apps</a></li>
                                        <li class="breadcrumb-item"><a href="javascript:void(0);">Crypto</a></li>
                                        <li class="breadcrumb-item active" aria-current="page">Buy & Sell</li>
                                    </ol>
                                </nav>
                            </div>
                        </div>
                        <div class="btn-list">
                            <button class="btn btn-primary-light btn-wave me-2">
                                <i class="bx bx-crown align-middle"></i> Plan Upgrade
                            </button>
                            <button class="btn btn-secondary-light btn-wave me-0">
                                <i class="ri-upload-cloud-line align-middle"></i> Export Report
                            </button>
                        </div>
                    </div>
                    <!-- Page Header Close -->

                        <!-- Start::row-1 -->
                        <div class="row">
                            <div class="col-xl-4">
                                <div class="card custom-card">
                                    <div class="card-header">
                                        <div class="card-title">
                                            Buy Crypto
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div>
                                            <div class="input-group mb-3 flex-nowrap">
                                                <input type="text" class="form-control" aria-label="crypto buy select" placeholder="Select Currency">
                                                <select class="form-control tomselect" data-trigger id="choices-single-default">
                                                    <option value="">BTC</option>
                                                    <option value="Choice 1">ETH</option>
                                                    <option value="Choice 2">XRP</option>
                                                    <option value="Choice 3">DASH</option>
                                                    <option value="Choice 4">NEO</option>
                                                    <option value="Choice 5">LTC</option>
                                                    <option value="Choice 6">BSD</option>
                                                </select>
                                            </div>
                                            <div class="input-group mb-3 flex-nowrap">
                                                <input type="text" class="form-control" aria-label="crypto buy select">
                                                <select class="form-control tomselect" data-trigger id="choices-single-default1">
                                                    <option value="">USD</option>
                                                    <option value="Choice 1">AED</option>
                                                    <option value="Choice 2">AUD</option>
                                                    <option value="Choice 3">ARS</option>
                                                    <option value="Choice 4">AZN</option>
                                                    <option value="Choice 5">BGN</option>
                                                    <option value="Choice 6">BRL</option>
                                                </select>
                                            </div>
                                            <div>
                                                <div class="fs-14 py-2"><span class="fw-medium text-dark">Price:</span><span class="text-muted ms-2 fs-14 d-inline-block">6.003435</span><span class="text-dark fw-medium float-end">BTC</span></div>
                                                <div class="fs-14 py-2"><span class="fw-medium text-dark">Amount:</span><span class="text-muted ms-2 fs-14 d-inline-block">2,34,4543.00</span><span class="text-dark fw-medium float-end">LTC</span></div>
                                                <div class="fw-medium fs-14 py-2">Total: <span class="fs-14 d-inline-block">22.00 BTC</span></div>
                                                <div class="fs-12 text-success">Additional Charges: 0.32%(0.0001231 BTC)</div>
                                                <label class="fw-medium fs-12 mt-4 mb-3">SELECT PAYMENT METHOD :</label>
                                                <div class="row g-2">
                                                    <div class="col-xl-6">
                                                        <div class="p-2 border rounded">
                                                            <div class="form-check mb-0">
                                                                <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1" checked>
                                                                <label class="form-check-label fs-12" for="flexRadioDefault1">
                                                                    Credit / Debit Cards
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xl-6">
                                                        <div class="p-2 border rounded">
                                                            <div class="form-check mb-0">
                                                                <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2">
                                                                <label class="form-check-label fs-12" for="flexRadioDefault2">
                                                                    Paypal
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xl-12">
                                                        <div class="p-2 border rounded">
                                                            <div class="form-check mb-0">
                                                                <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault3">
                                                                <label class="form-check-label fs-12" for="flexRadioDefault3">
                                                                    Wallet
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="d-grid mt-4 pt-1">
                                                <button type="button" class="btn btn-primary btn-wave btn-lg">BUY</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-4">
                                <div class="card custom-card">
                                    <div class="card-header">
                                        <div class="card-title">
                                            Sell Crypto
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="tab-pane border-0 p-0" id="sell-crypto1" role="tabpanel"
                                            aria-labelledby="sell-crypto1">
                                            <div class="input-group mb-3 flex-nowrap">
                                                <input type="text" class="form-control" aria-label="crypto buy select" placeholder="Select Currency">
                                                <select class="form-control tomselect" data-trigger id="choices-single-default2">
                                                    <option value="">BTC</option>
                                                    <option value="Choice 1">ETH</option>
                                                    <option value="Choice 2">XRP</option>
                                                    <option value="Choice 3">DASH</option>
                                                    <option value="Choice 4">NEO</option>
                                                    <option value="Choice 5">LTC</option>
                                                    <option value="Choice 6">BSD</option>
                                                </select>
                                            </div>
                                            <div class="input-group mb-3 flex-nowrap">
                                                <input type="text" class="form-control" aria-label="crypto buy select">
                                                <select class="form-control tomselect" data-trigger id="choices-single-default3">
                                                    <option value="">USD</option>
                                                    <option value="Choice 1">AED</option>
                                                    <option value="Choice 2">AUD</option>
                                                    <option value="Choice 3">ARS</option>
                                                    <option value="Choice 4">AZN</option>
                                                    <option value="Choice 5">BGN</option>
                                                    <option value="Choice 6">BRL</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <span class="form-label">Crypto Value :</span>
                                                <div class="position-relative">
                                                    <div class="p-2 border rounded d-flex align-items-center justify-content-between gap-3 mt-1">
                                                        <div class="gap-2 d-flex align-items-center">
                                                            <div class="lh-1">
                                                                <span class="avatar bg-light p-2">
                                                                    <img src="@($"{NavigationManager.BaseUri}assets/images/crypto-currencies/regular/Bitcoin.svg")" alt="">
                                                                </span>
                                                            </div>
                                                            <div class="fw-medium">Bitcoin - BTC</div>
                                                        </div>
                                                        <div class="text-end">
                                                            <span class="fw-medium d-block">0.374638535 BTC</span>
                                                            <span class="text-muted">$5,364.65</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <span class="form-label">Deposit To :</span>
                                                <div class="position-relative">
                                                    <div class="p-2 border rounded d-flex align-items-center gap-2 mt-1">
                                                        <div class="lh-1">
                                                            <span class="avatar bg-light p-2">
                                                                <i class="ri-bank-line text-info fs-20"></i>
                                                            </span>
                                                        </div>
                                                        <div>
                                                            <span class="fw-medium d-block">Banking</span>
                                                            <span class="text-muted">Checking ...</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="fs-14 py-2">
                                                    <div class="d-inline-flex">
                                                        <span class="fw-medium text-dark">Price:</span><span class="text-muted ms-2 fs-14">6.003435</span>
                                                    </div>
                                                    <span class="text-dark fw-medium float-end">BTC</span>
                                                </div>
                                                <div class="fs-14 py-2">
                                                    <div class="d-inline-flex">
                                                        <span class="fw-medium text-dark">Amount:</span><span class="text-muted ms-2 fs-14">2,34,4543.00</span>
                                                    </div>
                                                    <span class="text-dark fw-medium float-end">LTC</span>
                                                </div>
                                            </div>
                                            <div class="d-grid mt-4">
                                                <button type="button" class="btn btn-danger btn-wave btn-lg">SELL</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-4">
                                <div class="card custom-card">
                                    <div class="card-header">
                                        <div class="card-title">
                                            Quick Secure Transfer
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="tab-pane border-0 p-0" id="sell-crypto" role="tabpanel"
                                            aria-labelledby="sell-crypto">
                                            <div class="mb-3">
                                                <span class="form-label">Crypto Value :</span>
                                                <div class="position-relative">
                                                    <a href="javascript:void(0);" class="stretched-link"></a>
                                                    <div class="p-2 border rounded d-flex align-items-center justify-content-between gap-3 mt-1">
                                                        <div class="gap-2 d-flex align-items-center">
                                                            <div class="lh-1">
                                                                <span class="avatar bg-light p-2">
                                                                    <img src="@($"{NavigationManager.BaseUri}assets/images/crypto-currencies/regular/Bitcoin.svg")" alt="">
                                                                </span>
                                                            </div>
                                                            <div class="fw-medium">Bitcoin - BTC</div>
                                                        </div>
                                                        <div class="text-end">
                                                            <span class="fw-medium d-block">0.374638535 BTC</span>
                                                            <span class="text-muted">$5,364.65</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <span class="form-label">Deposit To :</span>
                                                <div class="position-relative">
                                                    <a href="javascript:void(0);" class="stretched-link"></a>
                                                    <div class="p-2 border rounded d-flex align-items-center gap-2 mt-1">
                                                        <div class="lh-1">
                                                            <span class="avatar bg-light p-2">
                                                                <i class="ri-bank-line text-info fs-20"></i>
                                                            </span>
                                                        </div>
                                                        <div>
                                                            <span class="fw-medium d-block">Banking</span>
                                                            <span class="text-muted">Checking ...</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <span class="d-block fw-medium">Amount :</span> 
                                                <div class="d-flex align-items-center justify-content-between text-muted">
                                                    <div>Weekly Bank Limit</div>
                                                    <div>$10,000 remaining</div>
                                                </div>
                                            </div>
                                            <div class="input-group mb-3 flex-nowrap">
                                                <input type="text" class="form-control" aria-label="crypto buy select">
                                                <select class="form-control tomselect" data-trigger id="choices-single-default4">
                                                    <option value="">USD</option>
                                                    <option value="Choice 1">AED</option>
                                                    <option value="Choice 2">AUD</option>
                                                    <option value="Choice 3">ARS</option>
                                                    <option value="Choice 4">AZN</option>
                                                    <option value="Choice 5">BGN</option>
                                                    <option value="Choice 6">BRL</option>
                                                </select>
                                            </div>
                                            <div>
                                                <div class="fs-14 py-2">
                                                    <div class="d-inline-flex">
                                                        <span class="fw-medium text-dark">Price:</span><span class="text-muted ms-2 fs-14">6.003435</span>
                                                    </div>
                                                    <span class="text-dark fw-medium float-end">BTC</span>
                                                </div>
                                                <div class="fs-14 py-2">
                                                    <div class="d-inline-flex">
                                                        <span class="fw-medium text-dark">Amount:</span><span class="text-muted ms-2 fs-14">2,34,4543.00</span>
                                                    </div>
                                                    <span class="text-dark fw-medium float-end">LTC</span>
                                                </div>
                                            </div>
                                            <div class="d-grid mt-4">
                                                <button type="button" class="btn btn-success btn-wave btn-lg">Transfer</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--End::row-1 -->

                        <!-- Start:: row-2 -->
                        <div class="row">
                            <div class="col-xl-12">
                                <div class="card custom-card">
                                    <div class="card-header justify-content-between">
                                        <div class="card-title">
                                            Buy & Sell Statistics
                                        </div>
                                        <div class="btn-group flex-wrap" role="group" aria-label="Basic example">
                                            <button type="button" class="btn btn-primary btn-sm btn-wave">1D</button>
                                            <button type="button" class="btn btn-primary-light btn-sm btn-wave">1W</button>
                                            <button type="button" class="btn btn-primary-light btn-sm btn-wave">1M</button>
                                            <button type="button" class="btn btn-primary-light btn-sm btn-wave">3M</button>
                                            <button type="button" class="btn btn-primary-light btn-sm btn-wave">6M</button>
                                            <button type="button" class="btn btn-primary-light btn-sm btn-wave">1Y</button>
                                        </div>
                                    </div>
                                    <div class="card-body p-xl-0">
                                        <div class="row">
                                            <div class="col-xl-8 pe-0 border-end border-inline-end-dashed">
                                                <div class="d-flex flex-wrap align-items-center border-bottom border-block-end-dashed mb-3 p-3 gap-4 ps-5 justify-content-between">
                                                    <div>
                                                        <span class="d-block fs-12">Total Buy</span>
                                                        <span class="d-block fw-medium fs-15 text-success">$324.25 USD</span>
                                                    </div>
                                                    <div>
                                                        <span class="d-block fs-12">Total Sell</span>
                                                        <span class="d-block fw-medium fs-15 text-danger">$4,235.25 USD</span>
                                                    </div>
                                                    <div>
                                                        <span class="d-block fs-12">Available Balance</span>
                                                        <span class="d-block fw-medium fs-15 text-primary">$22,803.92 USD</span>
                                                    </div>
                                                    <div>
                                                        <span class="d-block fs-12">Total Crypto Asset Value</span>
                                                        <span class="d-block fw-medium fs-15 text-warning">$4,56,683.00 USD</span>
                                                    </div>
                                                    <div></div>
                                                </div>
                                                <div id="buy_sell-statistics" class="px-3">
                                                    <ApexChart TItem="Statistics"  Height="300" Options=BuysellStatisticsChartOptions>
                                                        <ApexPointSeries TItem="Statistics"
                                                            Items="statistics"
                                                            SeriesType="@SeriesType.Bar"
                                                            Name="Buy"
                                                            XValue="@(e => e.Month)"
                                                            YAggregate="@(e => e.Sum(e => e.BuyValue))"/>
                                                        <ApexPointSeries TItem="Statistics"
                                                            Items="statistics"
                                                            SeriesType="@SeriesType.Bar"
                                                            Name="Sell"
                                                            XValue="@(e => e.Month)"
                                                            YAggregate="@(e => e.Sum(e => e.SellValue))"/>
                                                    </ApexChart>
                                                </div>
                                            </div>
                                            <div class="col-xl-4 ps-xl-0">
                                                <div class="p-3">
                                                    <div class="card custom-card bg-light shadow-none">
                                                        <div class="card-body">
                                                            <div class="d-flex align-items-center justify-content-between">
                                                                <div>
                                                                    <span class="d-block text-muted fs-12 mb-2">BTC/USD</span>
                                                                    <span class="fw-medium h6 mb-0">27.53612</span>
                                                                    <span class="text-danger d-block fs-12 mt-1">-0.06%</span>
                                                                </div>
                                                                <div>
                                                                    <span class="avatar avatar-xl avatar-rounded">
                                                                        <img src="@($"{NavigationManager.BaseUri}assets/images/crypto-currencies/square-color/Bitcoin.svg")" alt="">
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="card custom-card bg-light shadow-none">
                                                        <div class="card-body">
                                                            <div class="d-flex align-items-center justify-content-between">
                                                                <div>
                                                                    <span class="d-block text-muted fs-12 mb-2">ETH/USD</span>
                                                                    <span class="fw-medium h6 mb-0">20.6782</span>
                                                                    <span class="text-success d-block fs-12 mt-1">+2.86%</span>
                                                                </div>
                                                                <div>
                                                                    <span class="avatar avatar-xl avatar-rounded">
                                                                        <img src="@($"{NavigationManager.BaseUri}assets/images/crypto-currencies/square-color/Ethereum.svg")" alt="">
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="card custom-card bg-light shadow-none mb-0">
                                                        <div class="card-body">
                                                            <div class="d-flex align-items-center justify-content-between">
                                                                <div>
                                                                    <span class="d-block text-muted fs-12 mb-2">LTC/USD</span>
                                                                    <span class="fw-medium h6 mb-0">54.2912</span>
                                                                    <span class="text-success d-block fs-12 mt-1">+15.93%</span>
                                                                </div>
                                                                <div>
                                                                    <span class="avatar avatar-xl avatar-rounded">
                                                                        <img src="@($"{NavigationManager.BaseUri}assets/images/crypto-currencies/square-color/Litecoin.svg")" alt="">
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- End:: row-2 -->


        <!-- TomSelect JS -->
        <script src="@($"{NavigationManager.BaseUri}assets/libs/tom-select/js/tom-select.complete.min.js")"></script>
        <script src="@($"{NavigationManager.BaseUri}assets/js/tomselect.js")"></script>

@code {

    // Statistics Start //
    private List<Statistics> statistics { get; set; } = StatisticsData.GetStatisticss();
    private ApexChartOptions<Statistics> BuysellStatisticsChartOptions { get; set; } = new();
    public class Statistics {
        public string? Month { get; set; }
        public decimal BuyValue { get; set; }
        public decimal SellValue { get; set; }
    } ;
    public static class StatisticsData {
        public static List<Statistics> GetStatisticss() {
            // Replace this with actual data retrieval logic
            List<Statistics> statistics = new List<Statistics>
            {
                new Statistics { Month = "Jan", BuyValue = 20, SellValue = 85,},
                new Statistics { Month = "Feb", BuyValue = 38, SellValue = 65,},
                new Statistics { Month = "Mar", BuyValue = 38, SellValue = 75,},
                new Statistics { Month = "Apr", BuyValue = 72, SellValue = 38,},
                new Statistics { Month = "May", BuyValue = 55, SellValue = 85,},
                new Statistics { Month = "Jun", BuyValue = 63, SellValue = 35,},
                new Statistics { Month = "Jul", BuyValue = 43, SellValue = 62,},
                new Statistics { Month = "Aug", BuyValue = 76, SellValue = 40,},
                new Statistics { Month = "Sep", BuyValue = 55, SellValue = 40,},
                new Statistics { Month = "Oct", BuyValue = 80, SellValue = 64,},
                new Statistics { Month = "Nov", BuyValue = 40, SellValue = 50,},
                new Statistics { Month = "Dec", BuyValue = 80, SellValue = 89,},
            };
            return statistics;
        }
    }
    // Statistics End //

    protected override void OnInitialized() {

        BuysellStatisticsChartOptions = new ApexChartOptions<Statistics> {
            Chart = new () {
                Toolbar = new ApexCharts.Toolbar {
                    Tools = new Tools { Zoom = false, Zoomin = false, Zoomout = false,Pan = false, Reset = false,  Download = true},
                }, 
            },
            Grid = new Grid {
                BorderColor = "#f1f1f1",
                StrokeDashArray = 3,
            },
            Colors = new Color(new List<string> {"rgb(84, 109, 254)", "rgba(215, 124, 247, 1)"}),
            DataLabels = new DataLabels {
                Enabled = false,
            }, 
            Legend = new Legend {
                Show = true,
                Position = LegendPosition.Top,
                HorizontalAlign = Align.Center,
            },
            Stroke = new Stroke { 
                Curve = Curve.Smooth,
                Width= [1, 1],
            },
            PlotOptions = new PlotOptions {
                Bar = new PlotOptionsBar {
                    Horizontal = false,
                    BorderRadius = 2,
                    ColumnWidth = "35%",
                }
            },
            Yaxis = new List<YAxis>() {
                new YAxis {
                    Title = new AxisTitle {
                        Text = "Statistics",
                        Style = new AxisTitleStyle 
                        {
                            Color = "#adb5be",
                            FontSize = "14px",
                            FontFamily = "poppins, sans-serif",
                            FontWeight = 600,
                            CssClass = "apexcharts-yaxis-label"
                        },
                    },
                    Show = true,
                    Min = 0,
                    Max = 100,
                    StepSize = 20,
                },
            },
            Xaxis =  new XAxis {
                AxisBorder = new () {
                    Show = true,
                    Color = "rgba(119, 119, 142, 0.05)",
                    OffsetX = 0,
                    OffsetY = 0,
                },
                AxisTicks = new () {
                    Show = true,
                    Color = "rgba(119, 119, 142, 0.05)",
                    OffsetX = 0,
                    OffsetY = 0,
                },
                Labels = new XAxisLabels {
                    Show = true,
                    Rotate = -90,
                    Style = new AxisLabelStyle {
                        FontSize = "11px",
                        FontWeight = 500,
                        CssClass = "apexcharts-xaxis-label"
                    }
                },
            },
        };

    }

}