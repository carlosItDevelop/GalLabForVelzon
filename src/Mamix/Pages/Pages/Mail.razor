@page "/mail"
@using Blazored.TextEditor
@inject IJSRuntime JSRuntime
@inject Microsoft.AspNetCore.Components.NavigationManager NavigationManager // This line is used to generate URLs dynamically //


        <!-- Quill CSS -->
        <link rel="stylesheet" href="@($"{NavigationManager.BaseUri}assets/libs/quill/quill.snow.css")">
        <link rel="stylesheet" href="@($"{NavigationManager.BaseUri}assets/libs/quill/quill.bubble.css")">
      
        <!-- TomSelect Css -->
        <link rel="stylesheet" href="@($"{NavigationManager.BaseUri}assets/libs/tom-select/css/tom-select.bootstrap5.min.css")">


                    <!-- Page Header -->
                    <div class="my-4 page-header-breadcrumb d-flex align-items-center justify-content-between flex-wrap gap-2">
                        <div>
                            <h1 class="page-title fw-medium fs-18 mb-2">Mail App</h1>
                            <ol class="breadcrumb mb-0">
                                <li class="breadcrumb-item">
                                    <a href="javascript:void(0);">
                                        Pages
                                    </a>
                                </li>
                                <li class="breadcrumb-item" aria-current="page"><a href="javascript:void(0);">Email</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Mail App</li>
                            </ol>
                        </div>
                        <div class="btn-list">
                            <button class="btn btn-primary-light btn-wave me-2">
                                <i class="bx bx-crown align-middle"></i> Plan Upgrade
                            </button>
                            <button class="btn btn-secondary-light btn-wave me-0">
                                <i class="ri-upload-cloud-line align-middle"></i> Export Report
                            </button>
                        </div>
                    </div>
                    <!-- Page Header Close -->

                    <div class="main-mail-container mb-2 gap-2 d-flex">
                        <div class="mail-navigation border @MailNav">
                            <div class="d-grid align-items-top p-3 border-bottom">
                                <button class="btn btn-success d-flex align-items-center justify-content-center" data-bs-toggle="modal"
                                data-bs-target="#mail-Compose">
                                    <i class="ri-add-circle-line fs-16 align-middle me-1"></i>Compose Mail
                                </button>
                                <div class="modal modal-lg fade" id="mail-Compose" tabindex="-1" aria-labelledby="mail-ComposeLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h6 class="modal-title" id="mail-ComposeLabel">Compose Mail</h6>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                    aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body px-4">
                                                <div class="row">
                                                    <div class="col-xl-6 mb-2">
                                                        <label for="fromMail" class="form-label">From<sup><i class="ri-star-s-fill text-success fs-8"></i></sup></label>
                                                        <input type="email" class="form-control" id="fromMail" value="jackmiller2345&#64;gmail.com">
                                                    </div>
                                                    <div class="col-xl-6 mb-2">
                                                        <label for="toMail" class="form-label">To<sup><i class="ri-star-s-fill text-success fs-8"></i></sup></label>
                                                        <select class="form-control tomselect-multiple" name="toMail" id="toMail" multiple>
                                                            <option value="Choice 1" selected>jay&#64;gmail.com</option>
                                                            <option value="Choice 2">kia&#64;gmail.com</option>
                                                            <option value="Choice 3">don&#64;gmail.com</option>
                                                            <option value="Choice 4">kimo&#64;gmail.com</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-xl-6 mb-2">
                                                        <label for="mailCC" class="form-label text-dark fw-medium">Cc</label>
                                                        <input type="email" class="form-control" id="mailCC">
                                                    </div>
                                                    <div class="col-xl-6 mb-2">
                                                        <label for="mailBcc" class="form-label text-dark fw-medium">Bcc</label>
                                                        <input type="email" class="form-control" id="mailBcc">
                                                    </div>
                                                    <div class="col-xl-12 mb-2">
                                                        <label for="Subject" class="form-label">Subject</label>
                                                        <input type="text" class="form-control" id="Subject" placeholder="Subject">
                                                    </div>
                                                    <div class="col-xl-12">
                                                        <label class="col-form-label">Content :</label>
                                                        <div class="mail-compose">
                                                            <div id="mail-compose-editor">
                                                                <BlazoredTextEditor  @ref="@Compose">
                                                                    <ToolbarContent>
                                                                        <span class="ql-formats">
                                                                            <select class="ql-header">
                                                                                <option value="1"></option>
                                                                                <option value="2"></option>
                                                                                <option value="3"></option>
                                                                                <option value="4"></option>
                                                                                <option value="5"></option>
                                                                                <option value="6"></option>
                                                                                <option selected=""></option>
                                                                            </select> 
                                                                        </span>
                                                                        <span class="ql-formats">
                                                                            <select class="ql-font">
                                                                                <option selected=""></option>
                                                                                <option value="serif"></option>
                                                                                <option value="monospace"></option>
                                                                            </select>
                                                                        </span>
                                                                        <span class="ql-formats">
                                                                            <button class="ql-bold"></button>
                                                                            <button class="ql-italic"></button>
                                                                            <button class="ql-underline"></button>
                                                                            <button class="ql-strike"></button>
                                                                        </span>
                                                                        <span class="ql-formats">
                                                                            <button class="ql-blockquote" value="blockquote"></button>
                                                                            <button class="ql-code-block" value="code-block"></button>
                                                                        </span>
                                                                        <span class="ql-formats">
                                                                            <button class="ql-header" value="1"></button>
                                                                            <button class="ql-header" value="2"></button>
                                                                        </span>
                                                                        <span class="ql-formats">
                                                                            <button class="ql-list" value="ordered"></button>
                                                                            <button class="ql-list" value="bullet"></button>
                                                                        </span>
                                                                        <span class="ql-formats">
                                                                            <select class="ql-color"></select>
                                                                            <select class="ql-background"></select>
                                                                        </span>
                                                                        <span class="ql-formats">
                                                                            <select class="ql-align">
                                                                                <option selected=""></option>
                                                                                <option value="center"></option>
                                                                                <option value="right"></option>
                                                                                <option value="justify"></option>
                                                                            </select>
                                                                        </span>
                                                                        <span class="ql-formats">
                                                                            <button class="ql-image"></button>
                                                                            <button class="ql-video"></button>
                                                                        </span>
                                                                        <span class="ql-formats">
                                                                            <button class="ql-clean"></button>
                                                                        </span>
                                                                    </ToolbarContent>
                                                                    <EditorContent>
                                                                    </EditorContent>
                                                                </BlazoredTextEditor >
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-light"
                                                    data-bs-dismiss="modal">Cancel</button>
                                                <button type="button" class="btn btn-primary">Send</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex gap-3 align-items-center p-3 bg-light">
                                <div>
                                    <span class="avatar avatar-md online avatar-rounded">
                                        <img src="@($"{NavigationManager.BaseUri}assets/images/faces/9.jpg")" alt="">
                                    </span>
                                </div>
                                <div>
                                    <p class="fw-medium mb-0">Jack</p>
                                    <p class="fs-13 mb-0">jack1992&#64;gmail.com</p>
                                </div>
                            </div>
                            <div>
                                <BlazorOverlayScrollbars>
                                    <BlazorOverlayScrollbarsContent>
                                        <ul class="list-unstyled mail-main-nav" id="mail-main-nav">
                                            <li class="px-0 pt-0">
                                                <span class="fs-11 text-muted op-7 fw-medium">MAILS</span>
                                            </li>
                                            @foreach(var MailList in MailListNav) {
                                                <li @onclick="ShowTotalMails" class="@(MailList.active ? "active" : "") mail-type">
                                                    <a href="javascript:void(0);">
                                                        <div class="d-flex align-items-center">
                                                            <span class="me-2 lh-1">
                                                                <i class="@MailList?.mailIcon align-middle fs-14"></i>
                                                            </span>
                                                            <span class="flex-fill text-nowrap">
                                                                @MailList?.mailname
                                                            </span> 
                                                            @if(MailList?.badge == true) {
                                                                <span class="badge bg-@MailList?.badgeColor rounded-pill">@MailList?.badgeValue</span>
                                                            }
                                                        </div>
                                                    </a>
                                                </li>
                                            }
                                            <li class="px-0">
                                                <span class="fs-11 text-muted op-7 fw-medium">SETTINGS</span>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);">
                                                    <div class="d-flex align-items-center">
                                                        <span class="me-2 lh-1">
                                                            <i class="ri-settings-3-line align-middle fs-14"></i>
                                                        </span>
                                                        <span class="flex-fill text-nowrap">
                                                            Settings
                                                        </span>
                                                    </div>
                                                </a>
                                            </li>
                                            <li class="px-0">
                                                <span class="fs-11 text-muted op-7 fw-medium">LABELS</span>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);">
                                                    <div class="d-flex align-items-center">
                                                        <span class="me-2 lh-1">
                                                            <i class="ri-circle-fill align-middle fs-10 fw-medium text-secondary"></i>
                                                        </span>
                                                        <span class="flex-fill text-nowrap">
                                                            Mail
                                                        </span>
                                                    </div>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);">
                                                    <div class="d-flex align-items-center">
                                                        <span class="me-2 lh-1">
                                                            <i class="ri-circle-fill align-middle fs-10 fw-medium text-danger"></i>
                                                        </span>
                                                        <span class="flex-fill text-nowrap">
                                                            Home
                                                        </span>
                                                    </div>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);">
                                                    <div class="d-flex align-items-center">
                                                        <span class="me-2 lh-1">
                                                            <i class="ri-circle-fill align-middle fs-10 fw-medium text-success"></i>
                                                        </span>
                                                        <span class="flex-fill text-nowrap">
                                                            Work
                                                        </span>
                                                    </div>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);">
                                                    <div class="d-flex align-items-center">
                                                        <span class="me-2 lh-1">
                                                            <i class="ri-circle-fill align-middle fs-10 fw-medium text-dark"></i>
                                                        </span>
                                                        <span class="flex-fill text-nowrap">
                                                            Friends
                                                        </span>
                                                    </div>
                                                </a>
                                            </li>
                                            <li class="px-0">
                                                <span class="fs-11 text-muted op-7 fw-medium">ONLINE USERS</span>
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);">
                                                    <div class="d-flex align-items-top lh-1">
                                                        <div class="me-2">
                                                            <span class="avatar avatar-sm online avatar-rounded">
                                                                <img src="@($"{NavigationManager.BaseUri}assets/images/faces/4.jpg")" alt="">
                                                            </span>
                                                        </div>
                                                        <div>
                                                            <p class="text-default fw-medium mb-1">Angelica</p>
                                                            <p class="fs-12 text-muted mb-0">Hello this is angelica.</p>
                                                        </div>
                                                    </div>
                                                </a>    
                                            </li>
                                            <li>
                                                <a href="javascript:void(0);">
                                                    <div class="d-flex align-items-top lh-1">
                                                        <div class="me-2">
                                                            <span class="avatar avatar-sm online avatar-rounded">
                                                                <img src="@($"{NavigationManager.BaseUri}assets/images/faces/6.jpg")" alt="">
                                                            </span>
                                                        </div>
                                                        <div>
                                                            <p class="text-default fw-medium mb-1">Rexha</p>
                                                            <p class="fs-12 text-muted mb-0">Thanks for sharing file &#128512;.</p>
                                                        </div>
                                                    </div>
                                                </a>    
                                            </li>
                                        </ul>
                                    </BlazorOverlayScrollbarsContent>
                                </BlazorOverlayScrollbars>
                            </div>
                        </div>
                        <div class="total-mails border @TotalMails">
                            <div class="p-3 d-flex align-items-center border-bottom flex-wrap gap-2">
                                <div class="me-3">
                                    <input class="form-check-input" type="checkbox" id="checkAll" value="" aria-label="...">
                                </div>
                                <div class="flex-fill">
                                    <h6 class="fw-medium mb-0">All Mails</h6>
                                </div>
                                <div class="d-flex gap-2">
                                    <div class="input-group">
                                        <input type="text" class="form-control shadow-none" placeholder="Search Email" aria-describedby="button-addon">
                                        <button class="btn btn-primary" type="button" id="button-addon"><i class="ri-search-line"></i></button>
                                    </div>
                                    <button class="btn btn-icon btn-light me-1 d-lg-none d-block total-mails-close"  @onclick="CloseTotalMails">
                                        <i class="ri-close-line"></i>
                                    </button>
                                    <div class="dropdown">
                                        <button class="btn btn-icon btn-primary-light btn-wave" type="button"
                                            data-bs-toggle="dropdown" aria-expanded="false">
                                            <i class="ti ti-dots-vertical"></i>
                                        </button>
                                        <ul class="dropdown-menu">
                                            <li><a class="dropdown-item" href="javascript:void(0);">Recent</a></li>
                                            <li><a class="dropdown-item" href="javascript:void(0);">Unread</a></li>
                                            <li><a class="dropdown-item" href="javascript:void(0);">Mark All Read</a></li>
                                            <li><a class="dropdown-item" href="javascript:void(0);">Spam</a></li>
                                            <li><a class="dropdown-item" href="javascript:void(0);">Delete All</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <BlazorOverlayScrollbars>
                                <BlazorOverlayScrollbarsContent >
                                    <div class="mail-messages" id="mail-messages">
                                        <ul class="list-unstyled mb-0 mail-messages-container">
                                            @foreach(var MailList in TotalMailsList) {
                                                <li @onclick="@(() => ShowMail(MailList))" class="@(MailList.active ? "active" : "")">
                                                    <div class="d-sm-flex align-items-top flex-wrap">
                                                        <div class="me-3 mt-1">
                                                            <input class="form-check-input" type="checkbox" id="checkboxNoLabel1" value="" aria-label="...">
                                                        </div>
                                                        <div class="me-1 lh-1">
                                                            @if(MailList?.imgavatar == true) {
                                                                <span class="@MailList?.avatarBackgroundColor">
                                                                @MailList?.avatarname?.Substring(0, 2).ToUpper()
                                                                </span>
                                                            } else {
                                                                <span class="avatar avatar-md me-2 avatar-rounded mail-msg-avatar">
                                                                    <img src="@MailList?.Userimg" alt="">
                                                                </span>
                                                            }
                                                        </div>
                                                        <div class="flex-fill">
                                                            <a href="javascript:void(0);" data-bs-toggle="offcanvas"
                                                            data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
                                                                <p class="mb-1 fs-12 fw-medium">
                                                                    @MailList?.UserName
                                                                    @if(@MailList?.badge==true) {
                                                                        <span class="badge bg-@MailList?.badgeColor">@MailList?.badgeValue</span>
                                                                    }
                                                                    <span class="float-end text-muted fw-normal fs-11">
                                                                        @if(@MailList?.attachment == true) {
                                                                            <span class="me-2"><i class="ri-attachment-2 align-middle fs-12"></i></span>
                                                                        }
                                                                        @MailList?.Date
                                                                    </span>
                                                                </p>
                                                            </a>    
                                                            <div class="mail-msg mb-0">
                                                                <span class="d-block mb-0 fw-medium text-truncate w-75">@MailList?.Title</span>
                                                                <div
                                                                    class="fs-12 text-muted text-wrap text-truncate mail-msg-content">@MailList?.Description
                                                                    <button class="btn p-0 lh-1 mail-starred @(MailList!.Starred ? "true" : "") true border-0 float-end">
                                                                        <i class="ri-star-fill fs-14"></i>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </li>
                                            }
                                        </ul>
                                    </div>
                                </BlazorOverlayScrollbarsContent>
                            </BlazorOverlayScrollbars>
                        </div>
                        <div class="mail-recepients border">
                            <div class="p-3 border-bottom">
                                <button class="btn btn-light btn-icon rounded-pill" data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="Add Recepient"><i class="ri-add-line"></i></button>
                            </div>
                            <BlazorOverlayScrollbars>
                                <BlazorOverlayScrollbarsContent>
                                    <div class="p-3 d-flex flex-column align-items-center total-mail-recepients" id="mail-recepients">
                                        <a href="javascript:void(0);" class="mail-recepeint-person">
                                            <span class="avatar online avatar-rounded">
                                                <img src="@($"{NavigationManager.BaseUri}assets/images/faces/5.jpg")" alt="" data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="Abigail Scott">
                                            </span>
                                        </a>
                                        <a href="javascript:void(0);" class="mail-recepeint-person">
                                            <span class="avatar online avatar-rounded">
                                                <img src="@($"{NavigationManager.BaseUri}assets/images/faces/7.jpg")" alt="" data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="Amelia Turner">
                                            </span>
                                        </a>
                                        <a href="javascript:void(0);" class="mail-recepeint-person">
                                            <span class="avatar offline avatar-rounded">
                                                <img src="@($"{NavigationManager.BaseUri}assets/images/faces/4.jpg")" alt="" data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="Aria Robinson">
                                            </span>
                                        </a>
                                        <a href="javascript:void(0);" class="mail-recepeint-person">
                                            <span class="avatar offline online avatar-rounded">
                                                <img src="@($"{NavigationManager.BaseUri}assets/images/faces/8.jpg")" alt="" data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="Harper Wilson">
                                            </span>
                                        </a>
                                        <a href="javascript:void(0);" class="mail-recepeint-person">
                                            <span class="avatar offline avatar-rounded">
                                                <img src="@($"{NavigationManager.BaseUri}assets/images/faces/3.jpg")" alt="" data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="Olivia Davis">
                                            </span>
                                        </a>
                                        <a href="javascript:void(0);" class="mail-recepeint-person">
                                            <span class="avatar offline avatar-rounded">
                                                <img src="@($"{NavigationManager.BaseUri}assets/images/faces/11.jpg")" alt="" data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="Sophia White">
                                            </span>
                                        </a>
                                        <a href="javascript:void(0);" class="mail-recepeint-person">
                                            <span class="avatar online avatar-rounded">
                                                <img src="@($"{NavigationManager.BaseUri}assets/images/faces/16.jpg")" alt="" data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="Nathan Bennett">
                                            </span>
                                        </a>
                                        <a href="javascript:void(0);" class="mail-recepeint-person">
                                            <span class="avatar offline avatar-rounded">
                                                <img src="@($"{NavigationManager.BaseUri}assets/images/faces/10.jpg")" alt="" data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="Henry Morgan">
                                            </span>
                                        </a>
                                        <a href="javascript:void(0);" class="mail-recepeint-person">
                                            <span class="avatar offline avatar-rounded">
                                                <img src="@($"{NavigationManager.BaseUri}assets/images/faces/15.jpg")" alt="" data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="Leo Phillips">
                                            </span>
                                        </a>
                                    </div>
                                </BlazorOverlayScrollbarsContent>
                            </BlazorOverlayScrollbars>
                        </div>
                    </div>

                    <!-- Start::mail information offcanvas -->
                    <div class="offcanvas offcanvas-end mail-info-offcanvas" tabindex="-1" id="offcanvasRight"> 
                        <div class="offcanvas-body p-0">
                            <div class="mails-information">
                                <div class="mail-info-header d-flex flex-wrap gap-2 align-items-center">
                                    <div class="me-1">
                                        @if(ActiveMail?.imgavatar == true) {
                                            <span class="@ActiveMail?.avatarBackgroundColor">
                                            @ActiveMail?.avatarname?.Substring(0, 2).ToUpper()
                                            </span>
                                        } else {
                                            <span class="avatar avatar-md me-2 avatar-rounded mail-msg-avatar">
                                                <img src="@ActiveMail?.Userimg" alt="">
                                            </span>
                                        }
                                    </div>    
                                    <div class="flex-fill">
                                        <h6 class="mb-0 fw-medium">@ActiveMail?.UserName</h6>
                                        <span class="text-muted fs-12">@ActiveMail?.UserMail</span>
                                    </div>
                                    <div class="mail-action-icons">
                                        <button class="btn btn-icon btn-outline-light border" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Starred">
                                            <i class="ri-star-line"></i>
                                        </button>
                                        <button class="btn btn-icon btn-outline-light border ms-1" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Archive">
                                            <i class="ri-inbox-archive-line"></i>
                                        </button>
                                        <button class="btn btn-icon btn-outline-light border ms-1" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Report spam">
                                            <i class="ri-spam-2-line"></i>
                                        </button>
                                        <button class="btn btn-icon btn-outline-light border ms-1" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Delete">
                                            <i class="ri-delete-bin-line"></i>
                                        </button>
                                        <button class="btn btn-icon btn-outline-light border ms-1" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Reply">
                                            <i class="ri-reply-line"></i>
                                        </button>
                                        <button type="button" class="btn-close btn btn-sm btn-icon border" data-bs-dismiss="offcanvas"
                                            aria-label="Close"></button>
                                    </div>
                                    <div class="responsive-mail-action-icons">
                                        <div class="dropdown">
                                            <button class="btn btn-icon btn-light btn-wave waves-light waves-effect waves-light" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                <i class="ti ti-dots-vertical"></i>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="javascript:void(0);"><i class="ri-star-line me-1 align-middle d-inline-block"></i>Starred</a></li>
                                                <li><a class="dropdown-item" href="javascript:void(0);"><i class="ri-inbox-archive-line me-1 align-middle d-inline-block"></i>Archive</a></li>
                                                <li><a class="dropdown-item" href="javascript:void(0);"><i class="ri-spam-2-line me-1 align-middle d-inline-block"></i>Report Spam</a></li>
                                                <li><a class="dropdown-item" href="javascript:void(0);"><i class="ri-delete-bin-line me-1 align-middle d-inline-block"></i>Delete</a></li>
                                                <li><a class="dropdown-item" href="javascript:void(0);"><i class="ri-reply-line me-1 align-middle d-inline-block"></i>Reply</a></li>
                                            </ul>
                                        </div>
                                        <button class="btn btn-icon btn-light ms-1 close-button" data-bs-dismiss="offcanvas" aria-label="Close">
                                            <i class="ri-close-line"></i>
                                        </button>
                                    </div>
                                </div>
                                <BlazorOverlayScrollbars>
                                    <BlazorOverlayScrollbarsContent>
                                        <div class="mail-info-body p-4" id="mail-info-body">
                                            <div class="d-sm-flex d-block align-items-center justify-content-between mb-4">
                                                <div>
                                                    <p class="fs-20 fw-medium mb-0">@ActiveMail?.Title</p>
                                                </div>
                                                <div class="float-end">
                                                    <span class="me-2 fs-12 text-muted">@ActiveMail?.Date</span>
                                                </div>
                                            </div>
                                            <div class="main-mail-content mb-4">
                                                <p class="fs-14 fw-medium mb-4">Greetings Mr Jack &#128400;,</p>
                                                <p class="mb-2 text-muted">We're excited to invite you to our upcoming webinar, "Navigating Future Trends," where industry experts will share strategic insights to help you stay ahead in an ever-evolving landscape. Join us on [Date] at [Time] for an engaging session that promises to provide actionable knowledge and valuable perspectives.</p>
                                                <span class="d-block text-muted fw-meidum">Key Highlights :</span>
                                                <ul class="text-muted my-3">
                                                    <li class="mb-2">Expert analysis of emerging trends</li>
                                                    <li class="mb-2">Practical strategies for staying competitive</li>
                                                    <li class="mb-2">Q&A session for personalized insights</li>
                                                </ul>
                                                <p class="mb-2 text-muted">Earth has a diameter of roughly 8,000 miles (13,000 kilometers) and is mostly round because gravity generally pulls matter into a ball. But the spin of our home planet causes it to be squashed at its poles and swollen at the equator, making the true shape of the Earth an "oblate spheroid.".</p>
                                                <p class="mb-0 mt-4">
                                                    <span class="d-block">Best Regards,</span>
                                                    <span class="d-block">@ActiveMail?.UserName</span>
                                                </p>
                                            </div>
                                            <div class="mail-attachments mb-4">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div class="mb-0"> 
                                                        <span class="fs-14 fw-medium"><i class="ri-attachment-2 me-1 align-middle"></i>Attachments (1.8mb):</span>
                                                    </div>
                                                    <div class="btn-list">
                                                        <button class="btn btn-sm btn-warning-light">View All</button>
                                                        <button class="btn btn-sm btn-success-light">Download All</button>
                                                    </div>
                                                </div>    
                                                <div class="mt-2 d-flex flex-wrap gap-3">
                                                    <a href="javascript:void(0)">
                                                        <span class="avatar avatar-xl shadow-sm">
                                                            <img src="@($"{NavigationManager.BaseUri}assets/images/media/media-74.jpg")" alt="">
                                                        </span>
                                                    </a>
                                                    <a href="javascript:void(0)">
                                                        <span class="avatar avatar-xl shadow-sm">
                                                            <img src="@($"{NavigationManager.BaseUri}assets/images/media/media-75.jpg")" alt="">
                                                        </span>
                                                    </a>
                                                    <a href="javascript:void(0)">
                                                        <span class="avatar avatar-xl shadow-sm">
                                                            <img src="@($"{NavigationManager.BaseUri}assets/images/media/media-76.jpg")" alt="">
                                                        </span>
                                                    </a>
                                                    <a href="javascript:void(0)">
                                                        <span class="avatar avatar-xl shadow-sm">
                                                            <img src="@($"{NavigationManager.BaseUri}assets/images/media/media-77.jpg")" alt="">
                                                        </span>
                                                    </a>
                                                    <a href="javascript:void(0)">
                                                        <span class="avatar avatar-xl bg-primary-transparent">
                                                            15+
                                                        </span>
                                                    </a>
                                                </div>
                                            </div>
                                            <div class="mb-3"> 
                                                <span class="fs-14 fw-medium"><i class="ri-reply-all-line me-1 align-middle d-inline-block"></i>Reply:</span>
                                            </div>
                                            <div class="mail-reply">
                                                <div id="mail-reply-editor">
                                                    <BlazoredTextEditor  @ref="@QuillHtml">
                                                        <ToolbarContent>
                                                            <span class="ql-formats">
                                                                <select class="ql-header">
                                                                    <option value="1"></option>
                                                                    <option value="2"></option>
                                                                    <option value="3"></option>
                                                                    <option value="4"></option>
                                                                    <option value="5"></option>
                                                                    <option value="6"></option>
                                                                    <option selected=""></option>
                                                                </select> 
                                                            </span>
                                                            <span class="ql-formats">
                                                                <select class="ql-font">
                                                                    <option selected=""></option>
                                                                    <option value="serif"></option>
                                                                    <option value="monospace"></option>
                                                                </select>
                                                            </span>
                                                            <span class="ql-formats">
                                                                <button class="ql-bold"></button>
                                                                <button class="ql-italic"></button>
                                                                <button class="ql-underline"></button>
                                                                <button class="ql-strike"></button>
                                                            </span>
                                                            <span class="ql-formats">
                                                                <button class="ql-blockquote" value="blockquote"></button>
                                                                <button class="ql-code-block" value="code-block"></button>
                                                            </span>
                                                            <span class="ql-formats">
                                                                <button class="ql-header" value="1"></button>
                                                                <button class="ql-header" value="2"></button>
                                                            </span>
                                                            <span class="ql-formats">
                                                                <button class="ql-list" value="ordered"></button>
                                                                <button class="ql-list" value="bullet"></button>
                                                            </span>
                                                            <span class="ql-formats">
                                                                <select class="ql-color"></select>
                                                                <select class="ql-background"></select>
                                                            </span>
                                                            <span class="ql-formats">
                                                                <select class="ql-align">
                                                                    <option selected=""></option>
                                                                    <option value="center"></option>
                                                                    <option value="right"></option>
                                                                    <option value="justify"></option>
                                                                </select>
                                                            </span>
                                                            <span class="ql-formats">
                                                                <button class="ql-image"></button>
                                                                <button class="ql-video"></button>
                                                            </span>
                                                            <span class="ql-formats">
                                                                <button class="ql-clean"></button>
                                                            </span>
                                                        </ToolbarContent>
                                                        <EditorContent>
                                                        </EditorContent>
                                                    </BlazoredTextEditor >
                                                </div>
                                            </div>
                                        </div>
                                    </BlazorOverlayScrollbarsContent>
                                </BlazorOverlayScrollbars>
                                <div class="mail-info-footer d-flex flex-wrap gap-2 align-items-center justify-content-between">
                                    <div>
                                        <button class="btn btn-icon btn-primary-light" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Print">
                                            <i class="ri-printer-line"></i>
                                        </button>
                                        <button class="btn btn-icon btn-secondary-light ms-1" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Mark as read">
                                            <i class="ri-mail-open-line"></i>
                                        </button>
                                        <button class="btn btn-icon btn-success-light ms-1" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Reload">
                                            <i class="ri-refresh-line"></i>
                                        </button>
                                    </div>
                                    <div>
                                        <button class="btn btn-secondary">
                                            <i class="ri-share-forward-line me-1 d-inline-block align-middle"></i>Forward
                                        </button>
                                        <button class="btn btn-danger ms-1">
                                            <i class="ri-reply-all-line me-1 d-inline-block align-middle"></i>Reply
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End::mail information offcanvas -->
        

        <!-- TomSelect JS -->
        <script src="@($"{NavigationManager.BaseUri}assets/libs/tom-select/js/tom-select.complete.min.js")"></script>
        <script src="@($"{NavigationManager.BaseUri}assets/js/tomselect.js")"></script>

        <!-- Quill Editor JS -->
        <script src="@($"{NavigationManager.BaseUri}assets/libs/quill/quill.js")"></script>


@code {
    public class MailList
    {
        public int id { get; set; }
        public string? mailIcon { get; set; }
        public string? mailname { get; set; }
        public bool active { get; set; }
        public bool badge { get; set; }
        public string? badgeValue { get; set; }
        public string? badgeColor { get; set; }
        public string? Userimg { get; set; }
        public string? UserName { get; set; }
        public string? UserMail { get; set; }
        public string? Title { get; set; }
        public string? Description { get; set; }
        public string? Date { get; set; }
        public bool Starred { get; set; }
        public bool attachment { get; set; }
        public bool imgavatar {get;set;}
        public string? avatarname {get;set;}
        public string? avatarBackgroundColor {get;set;}
    }
    
    List<MailList> MailListNav = new List<MailList>()
    {  
        new MailList {
            id= 1, mailIcon= "ri-inbox-archive-line", mailname= "All Mails", active= true, badge= true, badgeValue= "6,446", badgeColor= "primary",
        },
        new MailList {
            id= 2, mailIcon= "ri-inbox-archive-line", mailname= "Inbox", active= false, badge= true, badgeValue= "26", badgeColor= "secondary",
        },
        new MailList {
            id= 3, mailIcon= "ri-send-plane-2-line", mailname= "Sent", active= false, badge= false, badgeValue= "", badgeColor= "",
        },
        new MailList {
            id= 4, mailIcon= "ri-draft-line", mailname= "Drafts", active= false, badge= false, badgeValue= "", badgeColor= "",
        },
        new MailList {
            id= 5, mailIcon= "ri-spam-2-line", mailname= "Spam", active= false, badge= true, badgeValue= "6", badgeColor= "danger",
        },
        new MailList {
            id= 6, mailIcon= "ri-bookmark-line", mailname= "Important", active= false, badge= false, badgeValue= "", badgeColor= "",
        },
        new MailList {
            id= 7, mailIcon= "ri-delete-bin-line", mailname= "Trash", active= false, badge= false, badgeValue= "", badgeColor= "",
        },
        new MailList {
            id= 8, mailIcon= "ri-archive-line", mailname= "Archive", active= false, badge= false, badgeValue= "", badgeColor= "",
        },
        new MailList {
            id= 9, mailIcon= "ri-star-line", mailname= "Starred", active= false, badge= true, badgeValue= "16", badgeColor= "warning",
        },
    };
    
    List<MailList> TotalMailsList = new List<MailList>()
    {  
        new MailList {
            id= 1,
            Userimg= "../assets/images/faces/5.jpg",
            UserName= "Amelia Turner", 
            UserMail= "AmeliaTurner@gmail.com ", 
            Title= "Quarterly Report Review", 
            Description= "Dear Team, kindly review the attached quarterly report before our meeting at 2 PM tomorrow. Your insights are appreciated.", 
            Date= "1:32PM", 
            active= false,
            Starred= true,
            attachment= true,
            badge= false,
            badgeColor= "",
            badgeValue= "",
            imgavatar = false,
        },
        new MailList {
            id= 2,
            Userimg= "../assets/images/faces/12.jpg",
            UserName= "Liam Parker", 
            UserMail= "LiamParker@gmail.com ", 
            Title= "Proposal Submission Confirmation", 
            Description= "Good day, this is to confirm the successful submission of our proposal for the upcoming client presentation. Await further instructions.", 
            Date= "10:27AM", 
            active= true,
            Starred= false,
            attachment= false,
            badge= false,
            badgeColor= "",
            badgeValue= "",
            imgavatar = false,
        },
        new MailList {
            id= 3,
            Userimg= "",
            avatarBackgroundColor = "avatar avatar-md me-2 avatar-rounded bg-primary mail-msg-avatar", 
            imgavatar = true,
            avatarname= "OF",
            UserName= "Owen Foster", 
            UserMail= "OwenFoster@gmail.com ", 
            Title= "Schedule Adjustment Request", 
            Description= "Colleagues, I am requesting a brief meeting tomorrow to discuss a necessary adjustment to our project schedule. Your availability appreciated.", 
            Date= "Yesterday, 10:27AM", 
            active= false,
            Starred= false,
            attachment= false,
            badge= true,
            badgeColor= "success ms-2",
            badgeValue= "Promotion",
        },
        new MailList {
            id= 4,
            Userimg= "../assets/images/faces/7.jpg",
            UserName= "Isabella Carter", 
            UserMail= "IsabellaCarter@gmail.com ", 
            Title= "Invitation to Industry Webinar", 
            Description= "Greetings, I invite you to join an industry webinar on [Topic] this Friday at 3 PM. Your participation would be valuable. RSVP at your earliest convenience.", 
            Date= "24 Oct, 5:45PM", 
            active= false,
            Starred= false,
            attachment= false,
            badge= true,
            badgeColor= "primary ms-2",
            badgeValue= "Social",
            imgavatar = false,
        },
        new MailList {
            id= 5,
            Userimg= "../assets/images/faces/15.jpg",
            UserName= "Mason Wallace", 
            UserMail= "MasonWallace@gmail.com ", 
            Title= "Budget Approval Pending", 
            Description= "Team, our budget proposal is pending approval. Please review the final draft attached and share any last-minute feedback before tomorrow's meeting.", 
            Date= "24 Sep, 11:24AM", 
            active= false,
            Starred= true,
            attachment= false,
            badge= false,
            badgeColor= "",
            badgeValue= "",
            imgavatar = false,
        },
        new MailList {
            id= 6,
            Userimg= "",
            avatarBackgroundColor = "avatar avatar-md me-2 avatar-rounded bg-primary mail-msg-avatar", 
            imgavatar = true,
            avatarname= "LP",
            UserName= "Leo Phillips", 
            UserMail= "LeoPhillips@gmail.com ", 
            Title= "Project Update Meeting", 
            Description= "Hello Team, let's convene for a project update meeting on Thursday at 10 AM. Please come prepared with progress reports and potential roadblocks.", 
            Date= "11 Sep, 10:32AM", 
            active= false,
            Starred= true,
            attachment= false,
            badge= true,
            badgeColor= "danger ms-2",
            badgeValue= "Personal",
        },
        new MailList {
            id= 7,
            Userimg= "",
            avatarBackgroundColor = "avatar avatar-md me-2 avatar-rounded bg-primary mail-msg-avatar", 
            imgavatar = true,
            avatarname= "LB",
            UserName= "Logan Brooks", 
            UserMail= "LoganBrooks@gmail.com ", 
            Title= "Request for Collaboration", 
            Description= "Dear [Name], I am reaching out to explore potential collaboration opportunities between our organizations. Would you be available for a brief discussion next week?", 
            Date= "08 Aug, 08:12AM", 
            active= false,
            Starred= false,
            attachment= false,
            badge= false,
            badgeColor= "",
            badgeValue= "",
        },
        new MailList {
            id= 8,
            Userimg= "../assets/images/faces/13.jpg",
            UserName= "Jackson Rivera", 
            UserMail= "DavidSubhman@gmail.com ", 
            Title= "Training Session Confirmation", 
            Description= "Greetings, your registration for the upcoming training session on [Topic] has been confirmed. Details and pre-read materials are attached. Ensure your readiness.", 
            Date= "16 July, 05:52PM", 
            active= false,
            Starred= false,
            attachment= false,
            badge= false,
            badgeColor= "",
            badgeValue= "",
            imgavatar = false,
        },
    };
    
    MailList? ActiveMail { get; set; }
    string? MailNav;
    string? TotalMails;
    
    int screenSize;
    protected override void OnInitialized()
    {
        ActiveMail = TotalMailsList.FirstOrDefault();
        if(screenSize < 992) {
            MailNav = "d-block";
            TotalMails = "d-none";
        }
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JSRuntime.InvokeVoidAsync("window.interop.initializeTooltips");
            DotNetObjectReference<Mail> dotNetObjectReference;
            dotNetObjectReference = DotNetObjectReference.Create(this);
            await JSRuntime.InvokeVoidAsync("resizeFunctions.addresizeListener", dotNetObjectReference);

            screenSize = await JSRuntime.InvokeAsync<int>("interop.inner", "innerWidth");
            if(screenSize < 992) {
                MailNav = "d-block";
                TotalMails = "d-none";
            }
            else {
                TotalMails = "d-block";
                MailNav = "d-block";
            }
        }
    }
    private void ShowMail(MailList Selected)
    {
        ActiveMail = Selected;
    }    
    private void ShowTotalMails()
    {     
        if(screenSize < 992) {
            TotalMails = "d-block";
            MailNav = "d-none";
        }
        else {
            TotalMails = "d-block";
            MailNav = "d-block";
        }
    }
    private void CloseTotalMails()
    {
        TotalMails = "d-none";
        MailNav = "d-block";
    }

    private List<int> WindowPreSize = new List<int>();
    [JSInvokable]
    public void OnWindowResize(int position)
    {
        screenSize = position;
        if(position < 992) {
            MailNav = "d-block";
            TotalMails = "d-none";
        }
        else {
            TotalMails = "d-block";
            MailNav = "d-block";
        }
        StateHasChanged();
    }

    <!-- QuilEditor JS Start -->
    BlazoredTextEditor? QuillHtml;
    BlazoredTextEditor? Compose;
    <!-- QuilEditor JS Start -->
}
